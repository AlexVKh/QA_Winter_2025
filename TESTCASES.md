# TESTCASES MICRO SERVICE

## Общая информация

**Host**: [https://qa-internship.avito.com](https://qa-internship.avito.com)

### Методы API:
- `POST /adverts` - Создать объявление
- `GET /adverts/{id}` - Получить объявление по идентификатору
- `GET /adverts?seller_id={seller_id}` - Получить все объявления по идентификатору продавца
- `GET /stats/{item_id}` - Получить статистику по идентификатору объявления

---

## 1. Тест-кейсы для `POST /adverts` (Создание объявления)

### TC-001: Успешное создание объявления

**Предусловие**:  
Валидный JSON с уникальным `seller_id` в диапазоне 111111-999999

**Шаги**:
1. Отправить POST `/adverts` с корректным телом запроса
2. Проверить, что сервер вернул 201 Created
3. Проверить, что в ответе содержится ID созданного объявления

**Ожидаемый результат**:  
Объявление успешно создано, возвращён его ID

---

### TC-002: Попытка создания объявления с пустыми полями

**Шаги**:
1. Отправить POST `/adverts` с JSON, где отсутствуют обязательные поля (например, `title`, `price`)
2. Проверить, что сервер вернул 400 Bad Request

**Ожидаемый результат**:  
API возвращает ошибку валидации

---

### TC-003: Попытка создания объявления с некорректным `seller_id`

**Шаги**:
1. Отправить POST `/adverts` с `seller_id` вне диапазона 111111-999999
2. Проверить, что сервер вернул 400 Bad Request

**Ожидаемый результат**:  
Ошибка валидации `seller_id`

---

## 2. Тест-кейсы для `GET /adverts/{id}` (Получение объявления по ID)

### TC-004: Успешное получение существующего объявления

**Предусловие**:  
Существующее объявление с известным ID

**Шаги**:
1. Отправить GET `/adverts/{id}` с корректным ID
2. Проверить, что сервер вернул 200 OK
3. Проверить, что ответ содержит корректные данные объявления

**Ожидаемый результат**:  
Объявление успешно получено

---

### TC-005: Запрос несуществующего объявления

**Шаги**:
1. Отправить GET `/adverts/{id}` с несуществующим ID
2. Проверить, что сервер вернул 404 Not Found

**Ожидаемый результат**:  
API возвращает ошибку, что объявление не найдено

---

## 3. Тест-кейсы для `GET /adverts?seller_id={seller_id}` (Получение объявлений по seller_id)

### TC-006: Успешное получение объявлений существующего продавца

**Предусловие**:  
Продавец с как минимум одним объявлением

**Шаги**:
1. Отправить GET `/adverts?seller_id={seller_id}`
2. Проверить, что сервер вернул 200 OK
3. Проверить, что список объявлений соответствует `seller_id`

**Ожидаемый результат**:  
Возвращены все объявления продавца

---

### TC-007: Запрос объявлений у продавца без объявлений

**Шаги**:
1. Отправить GET `/adverts?seller_id={seller_id}` для продавца без объявлений
2. Проверить, что сервер вернул 200 OK и пустой массив

**Ожидаемый результат**:  
Возвращён пустой список

---

### TC-008: Запрос с несуществующим `seller_id`

**Шаги**:
1. Отправить GET `/adverts?seller_id={seller_id}` с несуществующим `seller_id`
2. Проверить, что сервер вернул 404 Not Found

**Ожидаемый результат**:  
Ошибка "seller_id not found"

---

## 4. Тест-кейсы для `GET /stats/{item_id}` (Получение статистики по item_id)

### TC-009: Успешное получение статистики

**Предусловие**:  
Существующий `item_id`

**Шаги**:
1. Отправить GET `/stats/{item_id}`
2. Проверить, что сервер вернул 200 OK
3. Проверить, что в ответе есть корректные данные статистики

**Ожидаемый результат**:  
Статистика возвращена корректно

---

### TC-010: Запрос статистики по несуществующему `item_id`

**Шаги**:
1. Отправить GET `/stats/{item_id}` с несуществующим `item_id`
2. Проверить, что сервер вернул 404 Not Found

**Ожидаемый результат**:  
Ошибка "item_id not found"

---

## Дополнительные тест-кейсы

### TC-011: Нагрузка - создание 1000 объявлений подряд

**Шаги**:
1. Отправить 1000 запросов POST `/adverts` с уникальными данными
2. Проверить, что сервер не падает и отвечает 201 Created

**Ожидаемый результат**:  
Сервер обрабатывает все запросы без сбоев

---

### TC-012: Безопасность - SQL-инъекция в параметрах

**Шаги**:
1. Отправить POST `/adverts` с `title": "' OR 1=1; --` в теле
2. Проверить, что сервер вернул 400 Bad Request

**Ожидаемый результат**:  
SQL-инъекция не работает, сервер не уязвим
